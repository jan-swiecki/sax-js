#!/bin/bash
set -eo pipefail

rm -rf dist

  # --external:tap \
  # --external:lodash \
  # --bundle \

esbuild="esbuild \
  --log-level=warning \
  --keep-names \
  --target=node10 \
  --platform=node \
  --outdir=dist"


# $esbuild --format=cjs --bundle lib/sax.ts
$esbuild --format=cjs --outdir=dist lib/*.ts test/*

cp package.json dist

# tsc --esModuleInterop --lib es2020 --declaration --emitDeclarationOnly --outDir dist/lib lib/sax.ts